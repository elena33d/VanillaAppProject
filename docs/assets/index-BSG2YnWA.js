(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function s(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerPolicy&&(o.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?o.credentials="include":n.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(n){if(n.ep)return;n.ep=!0;const o=s(n);fetch(n.href,o)}})();function C(e,t){e&&e.classList.remove("rating-modal__input--error","rating-modal__textarea--error","footer__subscribe-form-input--error","form-field--error"),t&&(t.textContent="",t.classList.remove("form-error--visible"))}function O(){const e=document.getElementById("js-rating-server-message"),t=document.getElementById("js-rating-server-message-text");e&&(e.classList.remove("rating-modal__server-message--visible"),t&&(t.textContent=""),e.classList.remove("rating-modal__server-message--error","rating-modal__server-message--success"))}function D(e){const t=document.getElementById("js-rating-modal");if(!t)return;const s=document.getElementById("js-rating-modal-form"),r=document.getElementById("js-rating-modal-email"),n=document.getElementById("js-rating-modal-comment"),o=document.getElementById("js-rating-modal-value"),i=document.querySelectorAll(".rating-modal__star");s&&s.reset(),o&&(o.textContent="0.0");const a=document.getElementById("js-email-error"),l=document.getElementById("js-comment-error"),c=document.getElementById("js-rating-error");C(r,a),C(n,l),C(null,c),O(),i.forEach(u=>{u.classList.remove("rating-modal__star--active");const g=u.querySelector("svg");if(g){const _=g.querySelector("path");_&&(_.setAttribute("fill","none"),_.setAttribute("stroke","currentColor"))}}),t.classList.add("rating-modal--open"),document.body.style.overflow="hidden"}const R="favorites";function T(){try{const e=localStorage.getItem(R);return e?JSON.parse(e):[]}catch{return[]}}function U(e){return T().includes(e)}let M="home",f=null,q=null,w=null;function A(e){if(M===e)return;M=e,document.querySelectorAll(".header__nav-link").forEach(r=>{r.getAttribute("data-page")===e?r.classList.add("header__nav-link--active"):r.classList.remove("header__nav-link--active")}),document.querySelectorAll(".mobile-menu__nav-link").forEach(r=>{r.getAttribute("data-page")===e?r.classList.add("mobile-menu__nav-link--active"):r.classList.remove("mobile-menu__nav-link--active")}),e==="home"?se():e==="favorites"&&re()}function K(){f&&(f.classList.add("is-open"),document.body.style.overflow="hidden")}function S(){f&&(f.classList.remove("is-open"),document.body.style.overflow="")}function Q(){document.querySelectorAll(".header__nav-link").forEach(s=>{s.addEventListener("click",r=>{r.preventDefault();const n=s.getAttribute("data-page");n&&A(n)})}),f=document.querySelector(".mobile-menu"),q=document.querySelector(".header__burger"),w=document.querySelector(".mobile-menu__close"),q&&q.addEventListener("click",K),w&&w.addEventListener("click",S),document.querySelectorAll(".mobile-menu__nav-link").forEach(s=>{s.addEventListener("click",r=>{r.preventDefault();const n=s.getAttribute("data-page");n&&(A(n),S())})}),f&&f.addEventListener("click",s=>{s.target===f&&S()})}function V(){const e=document.getElementById("js-exercise-modal");e&&(e.classList.remove("exercise-modal--open"),document.body.style.overflow="")}function Y(e){const t=document.getElementById("js-exercise-modal");if(!t)return;t.classList.add("exercise-modal--open"),document.body.style.overflow="hidden";const s=document.getElementById("js-exercise-modal-image"),r=document.getElementById("js-exercise-modal-title"),n=document.querySelector(".exercise-modal__rating-value"),o=document.querySelector(".exercise-modal__rating-stars"),i=document.getElementById("js-exercise-modal-target"),a=document.getElementById("js-exercise-modal-body-part"),l=document.getElementById("js-exercise-modal-equipment"),c=document.getElementById("js-exercise-modal-popular"),u=document.getElementById("js-exercise-modal-calories"),g=document.getElementById("js-exercise-modal-time"),_=document.getElementById("js-exercise-modal-description");r&&(r.textContent="Loading..."),n&&(n.textContent="0.0"),i&&(i.textContent=""),a&&(a.textContent=""),l&&(l.textContent=""),c&&(c.textContent="0"),u&&(u.textContent="0"),g&&(g.textContent="/0 min"),_&&(_.textContent=""),s&&(s.src=""),fetch(`https://your-energy.b.goit.study/api/exercises/${e}`).then(d=>{if(!d.ok)throw new Error("Failed to fetch exercise details");return d.json()}).then(d=>{if(s&&(s.src=d.gifUrl||""),r&&(r.textContent=d.name||""),i&&(i.textContent=d.target||""),a&&(a.textContent=d.bodyPart||""),l&&(l.textContent=d.equipment||""),c&&(c.textContent=d.popularity||0),u&&(u.textContent=d.burnedCalories||0),g&&(g.textContent=`/${d.time||0} min`),_&&(_.textContent=d.description||""),n&&(n.textContent=(d.rating||0).toFixed(1)),o){const L=o.querySelectorAll(".exercise-modal__rating-star"),H=Math.round(d.rating||0);L.forEach((P,N)=>{const h=P.querySelector("path");N<H?(h.setAttribute("fill","#EEA10C"),h.removeAttribute("stroke"),h.removeAttribute("stroke-width")):(h.setAttribute("fill","none"),h.setAttribute("stroke","rgba(255,255,255,0.3)"),h.setAttribute("stroke-width","1.5"))})}Z(e);const b=document.getElementById("js-exercise-modal-rating-btn");if(b){const L=b.cloneNode(!0);b.parentNode.replaceChild(L,b),L.addEventListener("click",()=>{V(),D()})}}).catch(d=>{r&&(r.textContent="Error loading exercise"),_&&(_.textContent="Failed to load exercise details. Please try again later.")})}function Z(e){const t=document.getElementById("js-exercise-modal-favorites");if(!t)return;const s=U(e),r=t.querySelector("span"),n=t.querySelector("svg path");s?(t.classList.add("active"),r&&(r.textContent="Remove from favorites"),n&&(n.setAttribute("fill","currentColor"),n.removeAttribute("stroke"),n.removeAttribute("stroke-width"))):(t.classList.remove("active"),r&&(r.textContent="Add to favorites"),n&&(n.setAttribute("fill","none"),n.setAttribute("stroke","currentColor"),n.setAttribute("stroke-width","2")))}let p="Muscles",v=1,m=null,x="",B="home";function J(){const e=document.getElementById("js-exercises-search");e&&(e.style.display="flex")}function $(){const e=document.getElementById("js-exercises-search"),t=document.getElementById("js-exercises-search-input");e&&(e.style.display="none"),t&&(t.value=""),x=""}function W(){const e=document.querySelector(".exercises__content__main__cards");e&&e.addEventListener("click",t=>{const s=t.target.closest(".exercises__content__main__cards-item");if(!s)return;const r=s.getAttribute("data-category-name");if(r){k(r);return}const n=s.getAttribute("data-exercise-id");if(n){Y(n);return}})}function z(e){return`
    <div class="exercises__content__main__cards-item" data-category-name="${e.name}">
      <div class="exercises__content__main__cards-item-image">
        <img src="${e.imgURL}" alt="${e.name} exercise" />
        <div class="exercises__content__main__cards-item-overlay">
          <div class="exercises__content__main__cards-item-overlay-name">${e.name}</div>
          <div class="exercises__content__main__cards-item-overlay-category">${e.filter}</div>
        </div>
      </div>
    </div>
  `}function G(e){const t=e.rating||0,s=e.burnedCalories||0,r=e.time||0,n=e.bodyPart||"",o=e.target||"";return`
    <div class="exercises__content__main__cards-item exercises__content__main__cards-item--exercise" data-exercise-id="${e._id||""}">
      <div class="exercises__content__main__cards-item-header">
        <button class="exercises__content__main__cards-item-workout-btn">WORKOUT</button>
        <div class="exercises__content__main__cards-item-rating">
          <span class="exercises__content__main__cards-item-rating-value">${t.toFixed(1)}</span>
          <svg class="exercises__content__main__cards-item-rating-star" width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M9 0L11.0206 6.21885L17.5595 6.21885L12.2694 10.0623L14.2901 16.2812L9 12.4377L3.70993 16.2812L5.73056 10.0623L0.440492 6.21885L6.97937 6.21885L9 0Z" fill="#EEA10C"/>
          </svg>
        </div>
        <button class="exercises__content__main__cards-item-start-btn">
          Start
          <svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M6.75 4.5L11.25 9L6.75 13.5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </button>
      </div>
      <div class="exercises__content__main__cards-item-body">
        <div class="exercises__content__main__cards-item-icon">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M12 2L2 7L12 12L22 7L12 2Z" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            <path d="M2 17L12 22L22 17" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            <path d="M2 12L12 17L22 12" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </div>
        <h3 class="exercises__content__main__cards-item-title">${e.name}</h3>
      </div>
      <div class="exercises__content__main__cards-item-footer">
        <div class="exercises__content__main__cards-item-info">
          <span class="exercises__content__main__cards-item-info-label">Burned calories:</span>
          <span class="exercises__content__main__cards-item-info-value">${s}</span>
          <span class="exercises__content__main__cards-item-info-label">/ ${r} min</span>
        </div>
        <div class="exercises__content__main__cards-item-info">
          <span class="exercises__content__main__cards-item-info-label">Body part:</span>
          <span class="exercises__content__main__cards-item-info-value">${n}</span>
        </div>
        <div class="exercises__content__main__cards-item-info">
          <span class="exercises__content__main__cards-item-info-label">Target:</span>
          <span class="exercises__content__main__cards-item-info-value">${o}</span>
        </div>
      </div>
    </div>
  `}function X(e){const t=document.querySelector(".exercises__content__main__cards");t&&(t.classList.remove("exercises__content__main__cards--exercises"),t.innerHTML="",e.forEach(s=>{const r=z(s);t.insertAdjacentHTML("beforeend",r)}))}function F(e){const t=document.querySelector(".exercises__content__main__cards");t&&(t.classList.add("exercises__content__main__cards--exercises"),t.innerHTML="",e.forEach(s=>{const r=G(s);t.insertAdjacentHTML("beforeend",r)}))}function ee(){const e=document.querySelector(".exercises__content__main__cards");if(!e)return;e.classList.add("exercises__content__main__cards--exercises"),e.innerHTML="",e.insertAdjacentHTML("beforeend",`
    <div class="exercises__content__main__empty-state">
      <p class="exercises__content__main__empty-state-text">
        Unfortunately, no results were found. You may want to consider other search options.
      </p>
    </div>
  `)}function E(e=null){const t=document.getElementById("js-exercises-breadcrumbs");if(!t)return;if(t.innerHTML="",B==="favorites"){const r=document.createElement("button");r.className="exercises__content__header-breadcrumbs-item exercises__content__header-breadcrumbs-item--active",r.textContent="Favorites",r.setAttribute("data-breadcrumb","favorites"),t.appendChild(r);return}const s=document.createElement("button");if(s.className="exercises__content__header-breadcrumbs-item",s.textContent="Exercises",s.setAttribute("data-breadcrumb","exercises"),e||s.classList.add("exercises__content__header-breadcrumbs-item--active"),s.addEventListener("click",()=>{m=null,v=1,y(p,v)}),t.appendChild(s),e){const r=document.createElement("span");r.className="exercises__content__header-breadcrumbs-separator",r.textContent="/",t.appendChild(r);const n=document.createElement("button");n.className="exercises__content__header-breadcrumbs-item exercises__content__header-breadcrumbs-item--active",n.textContent=e,t.appendChild(n)}}function I(e,t=1){const s=document.querySelector(".exercises__content__pagination");if(!s||(s.innerHTML="",e===1))return;const r=c=>{v=c,m?k(m,c):y(p,c)},n=document.createElement("button");n.className="exercises__content__pagination-arrow",n.innerHTML="&laquo;",n.disabled=t===1,n.addEventListener("click",()=>r(1)),s.appendChild(n);const o=document.createElement("button");o.className="exercises__content__pagination-arrow",o.innerHTML="&lsaquo;",o.disabled=t===1,o.addEventListener("click",()=>r(t-1)),s.appendChild(o);const i=c=>{const u=document.createElement("button");return u.className="exercises__content__pagination-page",u.textContent=c,c===t&&u.classList.add("exercises__content__pagination-page--active"),u.addEventListener("click",()=>r(c)),u};if(e<=5)for(let c=1;c<=e;c++)s.appendChild(i(c));else{s.appendChild(i(1)),s.appendChild(i(2)),s.appendChild(i(3));const c=document.createElement("span");c.className="exercises__content__pagination-ellipsis",c.textContent="...",s.appendChild(c),s.appendChild(i(e-1)),s.appendChild(i(e))}const a=document.createElement("button");a.className="exercises__content__pagination-arrow",a.innerHTML="&rsaquo;",a.disabled=t===e,a.addEventListener("click",()=>r(t+1)),s.appendChild(a);const l=document.createElement("button");l.className="exercises__content__pagination-arrow",l.innerHTML="&raquo;",l.disabled=t===e,l.addEventListener("click",()=>r(e)),s.appendChild(l)}function y(e,t=1){p=e,v=t,$();const r=`https://your-energy.b.goit.study/api/filters?filter=${encodeURIComponent(e)}&page=${t}`;fetch(r).then(n=>n.json()).then(n=>{const o=n.results||n.exercises||n||[],i=n.totalPages||n.total_pages||n.pageCount||1;Array.isArray(o)&&o.length>0?(m=null,E(null),X(o),I(i,t)):(E(null),I(1,1))})}function k(e,t=1,s=x){m=e,v=t,x=s,J();let r="";p==="Muscles"?r="muscles":p==="Body parts"?r="bodyPart":p==="Equipment"&&(r="equipment");const n=encodeURIComponent(e);let o=`https://your-energy.b.goit.study/api/exercises?${r}=${n}&page=${t}&limit=10`;if(s&&s.trim()!==""){const i=encodeURIComponent(s.trim());o+=`&keyword=${i}`}fetch(o).then(i=>i.json()).then(i=>{const a=i.results||[],l=i.totalPages||1;if(E(e),Array.isArray(a)&&a.length>0)F(a),I(l,t);else{ee();const c=document.querySelector(".exercises__content__pagination");c&&(c.innerHTML="")}})}function te(){const e=document.getElementById("js-exercises-search-input");if(!e)return;let t=null;e.addEventListener("input",()=>{t&&clearTimeout(t),t=setTimeout(()=>{const s=e.value.trim();m&&k(m,1,s)},1e3)})}function j(){const e=document.querySelector(".exercises__content__main__cards");if(!e)return;e.classList.add("exercises__content__main__cards--exercises"),e.innerHTML="",e.insertAdjacentHTML("beforeend",`
    <div class="exercises__content__main__empty-state">
      <p class="exercises__content__main__empty-state-text">
        It appears that you haven't added any exercises to your favorites yet. 
        To get started, you can add exercises that you like to your favorites 
        for easier access in the future.
      </p>
    </div>
  `)}function ne(){const e=T();E(null);const t=document.querySelector(".exercises__content__pagination");if(t&&(t.innerHTML=""),e.length===0){j();return}const s=e.map(r=>fetch(`https://your-energy.b.goit.study/api/exercises/${r}`).then(n=>{if(!n.ok)throw new Error("Failed to fetch exercise");return n.json()}).catch(n=>null));Promise.all(s).then(r=>{const n=r.filter(o=>o!==null);n.length>0?F(n):j()})}function se(){B="home",m=null,x="";const e=document.querySelector(".exercises__content__header-filters");e&&(e.style.display="flex");const t=document.querySelector(".exercises__content");t&&t.classList.remove("exercises__content--favorites"),y(p,1)}function re(){B="favorites",m=null,x="";const e=document.querySelector(".exercises__content__header-filters");e&&(e.style.display="none"),$();const t=document.querySelector(".exercises__content");t&&t.classList.add("exercises__content--favorites"),ne()}function oe(){const e=new Date,t=e.getFullYear(),s=String(e.getMonth()+1).padStart(2,"0"),r=String(e.getDate()).padStart(2,"0");return`${t}-${s}-${r}`}async function ie(){const e=localStorage.getItem("quote-text"),t=localStorage.getItem("quote-author"),s=localStorage.getItem("quote-date"),r=oe();if(e&&t&&s&&s===r)return{quote:e,author:t};try{const o=await(await fetch("https://your-energy.b.goit.study/api/quote")).json();return localStorage.setItem("quote-text",o.quote),localStorage.setItem("quote-author",o.author),localStorage.setItem("quote-date",r),{quote:o.quote,author:o.author}}catch{return e&&t?{quote:e,author:t}:null}}async function ce(){const e=await ie();if(!e)return;const t=document.getElementById("js-exercises-quote-text"),s=document.getElementById("js-exercises-quote-author");t&&(t.textContent=e.quote),s&&(s.textContent=e.author)}document.addEventListener("DOMContentLoaded",async function(){console.log("DOM ready"),Q(),W(),te();const e=document.querySelectorAll(".exercises__content__header-filters-item");e.forEach(t=>{t.addEventListener("click",function(){e.forEach(r=>r.classList.remove("exercises__content__header-filters-item--active")),this.classList.add("exercises__content__header-filters-item--active");const s=this.dataset.filter;y(s,1)})}),await ce(),y("Muscles",1)});
